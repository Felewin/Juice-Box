/*
 * ============================================================
 *  JUICE BOX — Stylesheet
 * ============================================================
 *  This file handles all visual presentation: layout, colors,
 *  animations, and hover effects.
 *
 *  Design tokens (shared values) are stored as CSS custom
 *  properties on :root so they can be reused across rules —
 *  and even read from JavaScript (see game.js → FADE_MS).
 * ============================================================
 */

/* ---- Design tokens ---- */
:root {
    /* A "bouncy" easing curve that overshoots then settles.
       Used for both the entrance animation and the hover effect. */
    --bounce-ease: cubic-bezier(0.34, 1.56, 0.64, 1);

    /* Each grid cell is a square whose side length scales with the
       viewport (9vmin), clamped between 48px and 84px so it never
       gets too tiny on phones or too huge on ultrawide monitors. */
    --cell-size: clamp(48px, 9vmin, 84px);

    /* How long the fade-out lasts when transitioning between levels.
       game.js reads this value so the JS timeout stays in sync
       automatically — change it here and both CSS & JS update. */
    --fade-duration: 400ms;
}

/* ---- Reset & global defaults ---- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;

    /* Prevent mobile browsers from waiting 300ms on tap (to detect
       double-tap-to-zoom). Doesn't inherit, so applying to * ensures
       every element gets it. */
    touch-action: manipulation;
}

/* ---- Full-viewport canvas ---- */
html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;  /* No scrollbars — the game fills the screen */
}

body {
    /* Warm peach-to-coral gradient background */
    background: linear-gradient(145deg, #ffecd2 0%, #fcb69f 50%, #f7a99c 100%);

    /* Center the grid dead-center in the viewport */
    display: flex;
    justify-content: center;
    align-items: center;

    /* Prevent text selection when rapidly clicking sprites */
    user-select: none;
    -webkit-user-select: none;  /* Safari fallback */
}

/* ---- The invisible grid that holds all sprite cells ---- */
#grid {
    display: grid;
    grid-template-columns: repeat(3, auto);   /* 3 columns */
    grid-template-rows: repeat(7, auto);      /* 7 rows = 21 cells */

    /* Responsive gap between cells, same clamping idea as --cell-size */
    gap: clamp(6px, 1.2vmin, 14px);
}

/* ---- Individual sprite cell ---- */
.cell {
    width: var(--cell-size);
    aspect-ratio: 1;                /* Square: height equals width */
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;

    /* Start invisible (scaled to zero). The .appear class below
       will animate them in. */
    transform: scale(0);

    /* When .fade-out is added, opacity transitions smoothly to 0
       over --fade-duration. The transition is always defined so
       that adding the class is all it takes to trigger the fade. */
    transition: opacity var(--fade-duration) ease;
}

/* Applied by game.js after a random delay — animates the cell from
   scale(0) to scale(1) with a springy overshoot. "forwards" keeps
   the final keyframe (scale 1) after the animation ends. */
.cell.appear {
    animation: bounceIn 0.55s var(--bounce-ease) forwards;
}

/* Applied to every cell simultaneously when the player wins.
   The opacity transition on .cell handles the smooth fade.
   pointer-events: none prevents further clicks during the fade. */
.cell.fade-out {
    opacity: 0;
    pointer-events: none;
}

/* ---- Sprite image inside each cell ---- */
.cell img {
    width: 100%;
    height: 100%;
    object-fit: contain;            /* Scale without cropping */

    /* Hover scale-up uses the same bouncy easing as the entrance */
    transition: transform 0.4s var(--bounce-ease);

    /* Clicks should register on the parent .cell, not the <img> */
    pointer-events: none;

    /* Prevent the image from being dragged (looks janky otherwise) */
    -webkit-user-drag: none;
}

/* When hovering a cell, the image inside scales up bouncily */
.cell:hover img {
    transform: scale(1.22);
}

/* Cancel the hover scale-up during the fade-out so sprites
   don't pop bigger while disappearing */
.cell.fade-out:hover img {
    transform: scale(1);
}

/* ---- Entrance animation ----
   A spring-like sequence:
     0%   → invisible (scale 0)
     50%  → overshoot slightly larger than normal
     75%  → undershoot slightly smaller than normal
     90%  → tiny overshoot
     100% → settle at full size                     */
@keyframes bounceIn {
    0%   { transform: scale(0)    }
    50%  { transform: scale(1.15) }
    75%  { transform: scale(0.93) }
    90%  { transform: scale(1.05) }
    100% { transform: scale(1)    }
}
