<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Make the page responsive on mobile; disable pinch-to-zoom so the game feels app-like -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <!-- Disable caching: ensure changes propagate immediately on GitHub Pages -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>Juice Box</title>
    <!-- Favicon: cache-busted by loader.js after scripts load -->
    <link rel="icon" href="favicon.png" type="image/png">
    <!-- Google Fonts: Cherry Bomb One (used throughout the app) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&display=swap" rel="stylesheet">
    <!--
        CSS and scripts are loaded by loader.js with ?v=CACHE_BUST.
        version.js (commit hash) must load first so CACHE_BUST is defined.
    -->
    <script src="version.js"></script>
    <script src="loader.js"></script>
</head>
<body>
    <!--
        Menu container: holds both menu screens (title screen and mode select screen).
        Title screen (Juice Box text) is shown on load. First click fades it and
        reveals the mode select screen (mode buttons). Choosing a mode starts the game.
        Hidden once gameplay begins.
    -->
    <div id="menu-container">
        <h1 id="title">
            <span class="moving-gradient-text">Juice</span>
            <span class="moving-gradient-text">Box</span>
        </h1>
        <div id="mode-screen" class="hidden" aria-hidden="true">
            <button type="button" class="mode-btn" data-mode="go-bananas">
                <img src="sprites/banana.png" alt="" class="mode-btn-icon">
                <span class="moving-gradient-text">Go Bananas</span>
            </button>
            <button type="button" class="mode-btn" data-mode="apple-of-my-eye">
                <img src="sprites/apple-red.png" alt="" class="mode-btn-icon">
                <span class="moving-gradient-text">Apple Of My Eye</span>
            </button>
            <button type="button" class="mode-btn" data-mode="perfect-pearing">
                <img src="sprites/pear-green.png" alt="" class="mode-btn-icon">
                <span class="moving-gradient-text">Perfect Pearing</span>
            </button>
            <button type="button" class="mode-btn" data-mode="peach-party">
                <img src="sprites/peach.png" alt="" class="mode-btn-icon">
                <span class="moving-gradient-text">Peach Party</span>
            </button>
            <button type="button" class="mode-btn" data-mode="subtle-tea">
                <img src="sprites/unjuicable/teapot.png" alt="" class="mode-btn-icon">
                <span class="moving-gradient-text">Subtle Tea</span>
            </button>
            <button type="button" class="mode-btn" data-mode="pairy-picking">
                <img src="sprites/cherries.png" alt="" class="mode-btn-icon">
                <span class="moving-gradient-text">Pairy Picking</span>
            </button>
        </div>
    </div>

    <!--
        Liquid overlay: fills the screen with a random color when transitioning
        from mode screen to level or from level to level, then drains downward.
    -->
    <div id="liquid-overlay"></div>

    <!--
        The grid is filled with sprite cells dynamically each level by grid.js.
    -->
    <div id="grid"></div>

    <!--
        Juice Box button: returns one screen when clicked/tapped (level→mode select screen→title screen).
        Positioned in top-left corner, half the size of sprites.
    -->
    <button id="juicebox-button" aria-label="Juice Box">
        <img src="favicon.png" alt="Juice Box">
    </button>

    <!--
        Scripts load via loader.js (with cache busting). Script order matters.
        Head order: timing.js (must run before level.js), level.js (must be here to set
        --grid-columns/--grid-rows in time). Body order: audio, utils, transitions, grid,
        modes.js, modes/*.js, app.js. New modes: add <script> before app.js.
        See HOW TO ADD A NEW MODE in app.js. Implementation: add path to SCRIPTS in loader.js.
    -->
</body>
</html>
